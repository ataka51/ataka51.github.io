"use strict"; var mainNavigation = document.querySelector(".main-navigation"), mainNavigationIndex = document.querySelector(".main-navigation--index"), currentPage = mainNavigation.querySelector(".main-navigation__link--current"), menuBtn = document.querySelector(".menu-btn"), navigationLinks = Array.prototype.slice.call(document.querySelectorAll(".main-navigation__link")), menuHide = !1, ESC_KEYCODE = 27; window.sessionStorage && (menuHide = !!sessionStorage.getItem("menu-hidden")), mainNavigationIndex && !menuHide && mainNavigationIndex.classList.remove("main-navigation--disable"), mainNavigationIndex || navigationLinks.forEach(function (e) { e.addEventListener("click", function () { window.sessionStorage ? sessionStorage.setItem("menu-hidden", "true") : console.log("error") }) }), window.localStorage && localStorage.getItem("ataka-language") && (document.body.className = localStorage.getItem("ataka-language")), currentPage.addEventListener("click", function (e) { e.preventDefault(), mainNavigation.classList.add("main-navigation--disable") }), menuBtn.addEventListener("click", function (e) { e.preventDefault(), mainNavigation.classList.remove("main-navigation--disable") }); var languageBtns = Array.prototype.slice.call(document.querySelectorAll(".language__btn")); function keyAction(e, a) { e.keyCode === ESC_KEYCODE && a() } languageBtns.forEach(function (n) { n.addEventListener("click", function (e) { e.preventDefault(); var a = n.dataset.lang; document.body.classList.contains(a) || (document.body.className = a, window.localStorage ? localStorage.setItem("ataka-language", a) : console.log("cant remember language")) }) }); var videos = Array.prototype.slice.call(document.querySelectorAll(".video--active")), modal = document.querySelector(".modal"); if (modal) { var modalClose = modal.querySelector(".modal__close"); videos.forEach(function (c) { c.addEventListener("click", function (e) { e.preventDefault(); var a = '[data-video="' + c.dataset.button + '"]', n = modal.querySelector(a), t = n.querySelector(".modal__frame--youtube"), o = n.querySelector(".modal__frame--vimeo"); function i() { modal.classList.remove("modal--active"), n.classList.remove("modal__video--active"), t && t.contentWindow.postMessage('{"event":"command","func":"stopVideo","args":""}', "*"), o && o.contentWindow.postMessage('{"method":"unload"}', "*"), document.removeEventListener("keydown", l) } function l(e) { keyAction(e, i) } modal.classList.add("modal--active"), n.classList.add("modal__video--active"), document.addEventListener("keydown", l), modalClose.addEventListener("click", function (e) { e.preventDefault(), i() }) }) }) }